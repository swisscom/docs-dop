<!DOCTYPE html>
<html lang="en-US" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.41" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/docs-dop/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/docs-dop/images/favicon.png" type="image/x-icon" />
    <title>Configuration :: DOP Deploment Orchestrator for Puppet</title>
    
    
    <link href="/docs-dop/css/nucleus.css?1527590418" rel="stylesheet">
    <link href="/docs-dop/css/font-awesome.min.css?1527590418" rel="stylesheet">
    <link href="/docs-dop/css/hybrid.css?1527590418" rel="stylesheet">
    <link href="/docs-dop/css/featherlight.min.css?1527590418" rel="stylesheet">
    <link href="/docs-dop/css/perfect-scrollbar.min.css?1527590418" rel="stylesheet">
    <link href="/docs-dop/css/auto-complete.css?1527590418" rel="stylesheet">
    <link href="/docs-dop/css/theme.css?1527590418" rel="stylesheet">
    <link href="/docs-dop/css/hugo-theme.css?1527590418" rel="stylesheet">
    

    <script src="/docs-dop/js/jquery-2.x.min.js?1527590418"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/docs-dop/plan/configuration/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://swisscom.github.io/docs-dop">
  <strong>DOP</strong>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/docs-dop/js/lunr.min.js?1527590418"></script>
<script type="text/javascript" src="/docs-dop/js/auto-complete.js?1527590418"></script>
<script type="text/javascript">
    
        var baseurl = '\/docs-dop\/';
    
</script>
<script type="text/javascript" src="/docs-dop/js/search.js?1527590418"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/docs-dop/plan/" title="Plan" class="dd-item 
        parent
        
        
        ">
      <a href="/docs-dop/plan/">
          Plan
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/plan/pre_processor/" title="Pre-processor" class="dd-item ">
        <a href="/docs-dop/plan/pre_processor/">
        Pre-processor
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/plan/global_settings/" title="Global Settings" class="dd-item ">
        <a href="/docs-dop/plan/global_settings/">
        Global Settings
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/plan/credentials/" title="Credentials" class="dd-item ">
        <a href="/docs-dop/plan/credentials/">
        Credentials
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/plan/hooks/" title="Hooks" class="dd-item ">
        <a href="/docs-dop/plan/hooks/">
        Hooks
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/plan/infrastructures/" title="Infrastructures" class="dd-item ">
        <a href="/docs-dop/plan/infrastructures/">
        Infrastructures
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/plan/nodes/" title="Nodes" class="dd-item ">
        <a href="/docs-dop/plan/nodes/">
        Nodes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/plan/configuration/" title="Configuration" class="dd-item active">
        <a href="/docs-dop/plan/configuration/">
        Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/plan/steps/" title="Steps" class="dd-item ">
        <a href="/docs-dop/plan/steps/">
        Steps
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs-dop/command_plugins/" title="Command Plugins" class="dd-item 
        
        
        
        ">
      <a href="/docs-dop/command_plugins/">
          Command Plugins
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/command_plugins/custom/" title="custom" class="dd-item ">
        <a href="/docs-dop/command_plugins/custom/">
        custom
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/command_plugins/ssh/custom/" title="ssh/custom" class="dd-item ">
        <a href="/docs-dop/command_plugins/ssh/custom/">
        ssh/custom
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/command_plugins/ssh/puppet_agent_run/" title="ssh/puppet_agent_run" class="dd-item ">
        <a href="/docs-dop/command_plugins/ssh/puppet_agent_run/">
        ssh/puppet_agent_run
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/command_plugins/winrm/puppet_agent_run/" title="winrm/puppet_agent_run" class="dd-item ">
        <a href="/docs-dop/command_plugins/winrm/puppet_agent_run/">
        winrm/puppet_agent_run
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/command_plugins/overview/" title="Overview" class="dd-item ">
        <a href="/docs-dop/command_plugins/overview/">
        Overview
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs-dop/overview/" title="Overview" class="dd-item 
        
        
        
        ">
      <a href="/docs-dop/overview/">
          Overview
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/overview/about/" title="About" class="dd-item ">
        <a href="/docs-dop/overview/about/">
        About
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs-dop/overview/architecture/" title="Architecture" class="dd-item ">
        <a href="/docs-dop/overview/architecture/">
        Architecture
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs-dop/'>DOP Deploment Orchestrator for Puppet</a> > <a href='/docs-dop/plan/'>Plan</a> > Configuration
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#examples">Examples</a>
<ul>
<li><a href="#nodes">Nodes</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Configuration</h1>
          

        




<p>The configurations hash contains the hiera configuration for the deployment. The sub-hashes map the hierarchy
defined in the hiera.conf.</p>

<p>Example:</p>

<pre><code>hosts/foo/mynode.example.com

Maps to:

configuration:
  hosts:
    foo:
      mynode.example.com
</code></pre>

<p>You can use all the hierarchy levels you like, but be aware that the hiera plugin will only look them up if
the node it is looking the key up for is in the plan. Defaults which are relevant to your deployment should
therefor be set inside the plan, while global defaults should go into your global hiera data.</p>

<h2 id="examples">Examples</h2>

<h3 id="nodes">Nodes</h3>

<p>Usually there is a nodes or hosts layer in the hierarchy and it can be used to assigns variables to an individual node or to a selected set of nodes. Here are some examples:</p>

<pre><code>configuration:
  nodes:
    mysql01.example.com:
      role: mysql
      my_var:  my_value
    web04.example.com:
      role: httpd_special
</code></pre>

<p>The only relevant setting here for DOP is the role variable. The name of the role variable can be configured but defaults to &lsquo;role&rsquo;. If hiera is configured and activated, then dop will take the role specified in hiera if found.</p>

<p>During validation the plan is not in the plan cache the role can not be resolved by hiera directly. For this case, DOP has an internal resolution mechanism in which it parses the configuration hash to get the role variable.</p>

<ol>
<li>Hiera</li>
<li>Internal Lookup (for validation)</li>
<li>Default</li>
</ol>

<p>A node always needs a role. If the parser finds no value for one of the specified nodes in the plan file and if no default is set, then DOP will throw an error.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/docs-dop/plan/nodes/" title="Nodes"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/docs-dop/plan/steps/" title="Steps" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs-dop/js/clipboard.min.js?1527590418"></script>
    <script src="/docs-dop/js/perfect-scrollbar.min.js?1527590418"></script>
    <script src="/docs-dop/js/perfect-scrollbar.jquery.min.js?1527590418"></script>
    <script src="/docs-dop/js/jquery.sticky.js?1527590418"></script>
    <script src="/docs-dop/js/featherlight.min.js?1527590418"></script>
    <script src="/docs-dop/js/html5shiv-printshiv.min.js?1527590418"></script>
    <script src="/docs-dop/js/highlight.pack.js?1527590418"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs-dop/js/modernizr.custom.71422.js?1527590418"></script>
    <script src="/docs-dop/js/learn.js?1527590418"></script>
    <script src="/docs-dop/js/hugo-learn.js?1527590418"></script>

    <link href="/docs-dop/mermaid/mermaid.css?1527590418" type="text/css" rel="stylesheet" />
    <script src="/docs-dop/mermaid/mermaid.js?1527590418"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

